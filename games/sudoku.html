<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>æ•°ç‹¬</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #fff; color: #333; margin: 0; }
        h2 { margin: 0 0 10px 0; }
        .game-area { display: flex; flex-direction: column; gap: 20px; align-items: center; }
        #board { display: grid; grid-template-columns: repeat(9, 36px); border: 2px solid #333; }
        .cell { width: 36px; height: 36px; border: 1px solid #ccc; text-align: center; line-height: 36px; font-size: 18px; cursor: pointer; user-select: none; }
        /* 3x3 ç²—è¾¹æ¡†åŒºåˆ† */
        .cell:nth-child(3n) { border-right: 2px solid #333; }
        .cell:nth-child(9n) { border-right: 1px solid #ccc; } /* ä¿®æ­£æœ€å³ä¾§ */
        .cell:nth-child(3n+1) { border-left: none; }
        /* è¡Œç²—è¾¹æ¡† - è¿™é‡Œç”¨jsç®€å•å¤„ç†æˆ–css nth-childè¿‡äºå¤æ‚ï¼Œç®€åŒ–å¤„ç†: ç»™æ•´ä½“åŠ æ¡† */
        
        .cell.selected { background: #b3e5fc; }
        .cell.fixed { background: #f0f0f0; color: #000; font-weight: bold; cursor: default; }
        .cell.wrong { color: red; background: #ffcdd2; }
        .controls { display: grid; grid-template-columns: repeat(9, 1fr); gap: 5px; }
        .num-btn { width: 30px; height: 30px; background: #eee; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .num-btn:hover { background: #ddd; }
        .actions { display: flex; gap: 10px; }
        button.action-btn { padding: 8px 16px; background: #0071e3; color: white; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="game-area">
        <h2>æ•°ç‹¬ Sudoku</h2>
        <div id="board"></div>
        <div class="controls">
            <!-- JS ç”Ÿæˆ 1-9 æŒ‰é’® -->
        </div>
        <div class="actions">
            <button class="action-btn" onclick="check()">æ£€æŸ¥</button>
            <button class="action-btn" style="background:#666" onclick="newGame()">æ–°æ¸¸æˆ</button>
        </div>
    </div>

    <script>
        // ä¸€ä¸ªç®€å•çš„å›ºå®šè°œé¢˜æ¨¡æ¿ (0ä»£è¡¨ç©º) - çœŸæ­£çš„éšæœºæ•°ç‹¬ç®—æ³•å¾ˆé•¿ï¼Œè¿™é‡Œç”¨å˜æ¢æ³•ç®€åŒ–
        const basePuzzle = [
            "530070000", "600195000", "098000060",
            "800060003", "400803001", "700020006",
            "060000280", "000419005", "000080079"
        ];
        // å¯¹åº”ç­”æ¡ˆ
        const baseSolution = [
            "534678912", "672195348", "198342567",
            "859761423", "426853791", "713924856",
            "961537284", "287419635", "345286179"
        ];

        let boardData = [];
        let solutionData = [];
        let selectedCellIndex = -1;

        function newGame() {
            // è¿™é‡Œä¸ºäº†ç®€åŒ–ï¼Œç›´æ¥åŠ è½½ basePuzzleã€‚å®Œæ•´ç‰ˆå¯ä»¥å¢åŠ è¡Œå˜æ¢/æ•°å­—ç½®æ¢æ¥ç”Ÿæˆæ–°å±€
            boardData = basePuzzle.join('').split('').map(c => parseInt(c));
            solutionData = baseSolution.join('').split('').map(c => parseInt(c));
            render();
            selectedCellIndex = -1;
        }

        function render() {
            const boardEl = document.getElementById('board');
            boardEl.innerHTML = '';
            boardData.forEach((val, idx) => {
                const div = document.createElement('div');
                div.className = 'cell';
                if (basePuzzle.join('')[idx] !== '0') {
                    div.classList.add('fixed');
                    div.innerText = val;
                } else {
                    if (val !== 0) div.innerText = val;
                    div.onclick = () => selectCell(idx);
                }
                
                // å¢åŠ åº•éƒ¨è¾¹æ¡†ä»¥åŒºåˆ† 3x3
                const row = Math.floor(idx / 9);
                if ((row + 1) % 3 === 0 && row < 8) div.style.borderBottom = "2px solid #333";

                div.id = `c-${idx}`;
                boardEl.appendChild(div);
            });
        }

        function selectCell(idx) {
            if (selectedCellIndex !== -1) {
                document.getElementById(`c-${selectedCellIndex}`).classList.remove('selected');
            }
            selectedCellIndex = idx;
            document.getElementById(`c-${idx}`).classList.add('selected');
        }

        function fillNum(num) {
            if (selectedCellIndex === -1) return;
            boardData[selectedCellIndex] = num;
            const el = document.getElementById(`c-${selectedCellIndex}`);
            el.innerText = num === 0 ? '' : num;
            el.classList.remove('wrong');
        }

        function check() {
            let error = false;
            boardData.forEach((val, idx) => {
                const el = document.getElementById(`c-${idx}`);
                if (val !== 0 && val !== solutionData[idx]) {
                    el.classList.add('wrong');
                    error = true;
                }
            });
            if (!error && !boardData.includes(0)) alert("æ­å–œæˆåŠŸï¼ğŸ‰");
        }

        // ç”Ÿæˆæ•°å­—é”®ç›˜
        const controls = document.querySelector('.controls');
        for (let i = 1; i <= 9; i++) {
            const btn = document.createElement('button');
            btn.className = 'num-btn';
            btn.innerText = i;
            btn.onclick = () => fillNum(i);
            controls.appendChild(btn);
        }
        // æ¸…é™¤æŒ‰é’®
        const clearBtn = document.createElement('button');
        clearBtn.className = 'num-btn';
        clearBtn.innerText = 'X';
        clearBtn.style.color = 'red';
        clearBtn.onclick = () => fillNum(0);
        controls.appendChild(clearBtn);

        // é”®ç›˜æ”¯æŒ
        document.addEventListener('keydown', e => {
            if (e.key >= '1' && e.key <= '9') fillNum(parseInt(e.key));
            if (e.key === 'Backspace' || e.key === 'Delete') fillNum(0);
        });

        newGame();
    </script>
</body>
</html>